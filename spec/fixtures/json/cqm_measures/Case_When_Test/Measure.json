{
  "composite": false,
  "component": false,
  "component_hqmf_set_ids": [],
  "measure_scoring": "COHORT",
  "calculation_method": "EPISODE_OF_CARE",
  "source_data_criteria": [
    {
      "dataElementCodes": [],
      "_id": "65ba97456068b16c755ed930",
      "participant": [],
      "relatedTo": [],
      "qdmTitle": "Encounter, Performed",
      "hqmfOid": "2.16.840.1.113883.10.20.28.4.5",
      "qdmCategory": "encounter",
      "qdmStatus": "performed",
      "qdmVersion": "5.6",
      "_type": "QDM::EncounterPerformed",
      "facilityLocations": [],
      "description": "Encounter, Performed: EncounterInpatient",
      "codeListId": "2.16.840.1.113883.3.666.5.307",
      "id": "65ba97456068b16c755ed930",
      "diagnoses": []
    },
    {
      "dataElementCodes": [],
      "_id": "65ba97456068b16c755ed931",
      "performer": [],
      "relatedTo": [],
      "qdmTitle": "Procedure, Performed",
      "hqmfOid": "2.16.840.1.113883.10.20.28.4.67",
      "qdmCategory": "procedure",
      "qdmStatus": "performed",
      "qdmVersion": "5.6",
      "_type": "QDM::ProcedurePerformed",
      "description": "Procedure, Performed: SevereMaternalMorbidityProcedures",
      "codeListId": "2.16.840.1.113762.1.4.1029.256",
      "id": "65ba97456068b16c755ed931",
      "components": []
    },
    {
      "dataElementCodes": [],
      "_id": "65ba97456068b16c755ed932",
      "performer": [],
      "relatedTo": [],
      "qdmTitle": "Procedure, Performed",
      "hqmfOid": "2.16.840.1.113883.10.20.28.4.67",
      "qdmCategory": "procedure",
      "qdmStatus": "performed",
      "qdmVersion": "5.6",
      "_type": "QDM::ProcedurePerformed",
      "description": "Procedure, Performed: BloodTransfusion",
      "codeListId": "2.16.840.1.113762.1.4.1029.213",
      "id": "65ba97456068b16c755ed932",
      "components": []
    }
  ],
  "measure_attributes": [],
  "patients": ["65ba97abf3f95300004b62d4"],
  "value_sets": [
    "65ba97456068b16c755ed920",
    "65ba97456068b16c755ed921",
    "65ba97456068b16c755ed922",
    "65ba97456068b16c755ed923",
    "65ba97456068b16c755ed924",
    "65ba97456068b16c755ed925",
    "65ba97456068b16c755ed926"
  ],
  "_id": "65ba97456068b16c755ed928",
  "title": "TestWhenCase",
  "description": "",
  "hqmf_id": "8A6D0413-8D31-A32C-018D-60D0A6600AD3",
  "hqmf_set_id": "25B51662-1A12-411E-AC9D-22657E11EED8",
  "main_cql_library": "TestWhenCase",
  "hqmf_version_number": "0.0.001",
  "cms_id": "CMSv0",
  "calculate_sdes": null,
  "measure_period": {
    "type": "IVL_TS",
    "low": {
      "type": "TS",
      "value": "201201010000",
      "inclusive?": true,
      "derived?": false
    },
    "high": {
      "type": "TS",
      "value": "201212312359",
      "inclusive?": true,
      "derived?": false
    },
    "width": {
      "type": "PQ",
      "unit": "a",
      "value": "1",
      "inclusive?": true,
      "derived?": false
    }
  },
  "population_criteria": {
    "IPP": {
      "conjunction?": true,
      "type": "IPP",
      "hqmf_id": "9C288484-8902-4099-9751-EB420FE57F23",
      "preconditions": [
        {
          "id": 2,
          "preconditions": [
            {
              "id": 1,
              "reference": "TestWhenCase__SDE_SOC_Procedure_Detail__1407163A_24C5_4C70_971E_F0E43AA1DFD5"
            }
          ],
          "conjunction_code": "allTrue"
        }
      ]
    }
  },
  "updated_at": 1706727237745,
  "created_at": 1706727237745,
  "cql_libraries": [
    {
      "is_main_library": true,
      "is_top_level": true,
      "_id": "65ba97456068b16c755ed929",
      "library_name": "TestWhenCase",
      "library_version": "0.0.001",
      "elm": {
        "library": {
          "annotation": [
            {
              "translatorOptions": "EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion,DisableMethodInvocation",
              "type": "CqlToElmInfo"
            },
            {
              "type": "Annotation",
              "s": {
                "r": "79",
                "s": [
                  {
                    "value": ["", "library TestWhenCase version '0.0.001'"]
                  }
                ]
              }
            }
          ],
          "identifier": {
            "id": "TestWhenCase",
            "version": "0.0.001"
          },
          "schemaIdentifier": {
            "id": "urn:hl7-org:elm",
            "version": "r1"
          },
          "usings": {
            "def": [
              {
                "localIdentifier": "System",
                "uri": "urn:hl7-org:elm-types:r1"
              },
              {
                "localId": "1",
                "locator": "3:1-3:23",
                "localIdentifier": "QDM",
                "uri": "urn:healthit-gov:qdm:v5_6",
                "version": "5.6",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "1",
                      "s": [
                        {
                          "value": ["", "using "]
                        },
                        {
                          "s": [
                            {
                              "value": ["QDM"]
                            }
                          ]
                        },
                        {
                          "value": [" version ", "'5.6'"]
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          "parameters": {
            "def": [
              {
                "localId": "11",
                "locator": "13:1-13:49",
                "name": "Measurement Period",
                "accessLevel": "Public",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "11",
                      "s": [
                        {
                          "value": [
                            "",
                            "parameter ",
                            "\"Measurement Period\"",
                            " "
                          ]
                        },
                        {
                          "r": "10",
                          "s": [
                            {
                              "value": ["Interval<"]
                            },
                            {
                              "r": "9",
                              "s": [
                                {
                                  "value": ["DateTime"]
                                }
                              ]
                            },
                            {
                              "value": [">"]
                            }
                          ]
                        }
                      ]
                    }
                  }
                ],
                "parameterTypeSpecifier": {
                  "localId": "10",
                  "locator": "13:32-13:49",
                  "type": "IntervalTypeSpecifier",
                  "pointType": {
                    "localId": "9",
                    "locator": "13:41-13:48",
                    "name": "{urn:hl7-org:elm-types:r1}DateTime",
                    "type": "NamedTypeSpecifier"
                  }
                }
              }
            ]
          },
          "valueSets": {
            "def": [
              {
                "localId": "2",
                "locator": "5:1-5:70",
                "name": "Blood Transfusion",
                "id": "2.16.840.1.113762.1.4.1029.213",
                "accessLevel": "Public",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "2",
                      "s": [
                        {
                          "value": [
                            "",
                            "valueset ",
                            "\"Blood Transfusion\"",
                            ": ",
                            "'urn:oid:2.16.840.1.113762.1.4.1029.213'"
                          ]
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "localId": "3",
                "locator": "6:1-6:81",
                "name": "Conversion of Cardiac Rhythm",
                "id": "2.16.840.1.113762.1.4.1029.357",
                "accessLevel": "Public",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "3",
                      "s": [
                        {
                          "value": [
                            "",
                            "valueset ",
                            "\"Conversion of Cardiac Rhythm\"",
                            ": ",
                            "'urn:oid:2.16.840.1.113762.1.4.1029.357'"
                          ]
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "localId": "4",
                "locator": "7:1-7:71",
                "name": "Encounter Inpatient",
                "id": "2.16.840.1.113883.3.666.5.307",
                "accessLevel": "Public",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "4",
                      "s": [
                        {
                          "value": [
                            "",
                            "valueset ",
                            "\"Encounter Inpatient\"",
                            ": ",
                            "'urn:oid:2.16.840.1.113883.3.666.5.307'"
                          ]
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "localId": "5",
                "locator": "8:1-8:65",
                "name": "Hysterectomy",
                "id": "2.16.840.1.113762.1.4.1029.358",
                "accessLevel": "Public",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "5",
                      "s": [
                        {
                          "value": [
                            "",
                            "valueset ",
                            "\"Hysterectomy\"",
                            ": ",
                            "'urn:oid:2.16.840.1.113762.1.4.1029.358'"
                          ]
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "localId": "6",
                "locator": "9:1-9:89",
                "name": "Severe Maternal Morbidity Procedures",
                "id": "2.16.840.1.113762.1.4.1029.256",
                "accessLevel": "Public",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "6",
                      "s": [
                        {
                          "value": [
                            "",
                            "valueset ",
                            "\"Severe Maternal Morbidity Procedures\"",
                            ": ",
                            "'urn:oid:2.16.840.1.113762.1.4.1029.256'"
                          ]
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "localId": "7",
                "locator": "10:1-10:65",
                "name": "Tracheostomy",
                "id": "2.16.840.1.113762.1.4.1029.359",
                "accessLevel": "Public",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "7",
                      "s": [
                        {
                          "value": [
                            "",
                            "valueset ",
                            "\"Tracheostomy\"",
                            ": ",
                            "'urn:oid:2.16.840.1.113762.1.4.1029.359'"
                          ]
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "localId": "8",
                "locator": "11:1-11:64",
                "name": "Ventilation",
                "id": "2.16.840.1.113762.1.4.1029.360",
                "accessLevel": "Public",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "8",
                      "s": [
                        {
                          "value": [
                            "",
                            "valueset ",
                            "\"Ventilation\"",
                            ": ",
                            "'urn:oid:2.16.840.1.113762.1.4.1029.360'"
                          ]
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          "contexts": {
            "def": [
              {
                "locator": "15:1-15:15",
                "name": "Patient"
              }
            ]
          },
          "statements": {
            "def": [
              {
                "locator": "15:1-15:15",
                "name": "Patient",
                "context": "Patient",
                "expression": {
                  "type": "SingletonFrom",
                  "operand": {
                    "locator": "15:1-15:15",
                    "dataType": "{urn:healthit-gov:qdm:v5_6}Patient",
                    "templateId": "Patient",
                    "type": "Retrieve"
                  }
                }
              },
              {
                "localId": "19",
                "locator": "17:1-19:67",
                "name": "Qualifying Encounters",
                "context": "Patient",
                "accessLevel": "Public",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "19",
                      "s": [
                        {
                          "value": [
                            "",
                            "define ",
                            "\"Qualifying Encounters\"",
                            ":\n  "
                          ]
                        },
                        {
                          "r": "18",
                          "s": [
                            {
                              "s": [
                                {
                                  "r": "13",
                                  "s": [
                                    {
                                      "r": "12",
                                      "s": [
                                        {
                                          "r": "12",
                                          "s": [
                                            {
                                              "value": [
                                                "[",
                                                "\"Encounter, Performed\"",
                                                ": "
                                              ]
                                            },
                                            {
                                              "s": [
                                                {
                                                  "value": [
                                                    "\"Encounter Inpatient\""
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "value": ["]"]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "value": [" ", "Encounter"]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "value": ["\n    "]
                            },
                            {
                              "r": "17",
                              "s": [
                                {
                                  "value": ["where "]
                                },
                                {
                                  "r": "17",
                                  "s": [
                                    {
                                      "r": "15",
                                      "s": [
                                        {
                                          "r": "14",
                                          "s": [
                                            {
                                              "value": ["Encounter"]
                                            }
                                          ]
                                        },
                                        {
                                          "value": ["."]
                                        },
                                        {
                                          "r": "15",
                                          "s": [
                                            {
                                              "value": ["relevantPeriod"]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "r": "17",
                                      "value": [" ", "ends during", " "]
                                    },
                                    {
                                      "r": "16",
                                      "s": [
                                        {
                                          "value": ["\"Measurement Period\""]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  }
                ],
                "expression": {
                  "localId": "18",
                  "locator": "18:3-19:67",
                  "type": "Query",
                  "source": [
                    {
                      "localId": "13",
                      "locator": "18:3-18:59",
                      "alias": "Encounter",
                      "expression": {
                        "localId": "12",
                        "locator": "18:3-18:49",
                        "dataType": "{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed",
                        "templateId": "PositiveEncounterPerformed",
                        "codeProperty": "code",
                        "codeComparator": "in",
                        "type": "Retrieve",
                        "codes": {
                          "locator": "18:28-18:48",
                          "name": "Encounter Inpatient",
                          "preserve": true,
                          "type": "ValueSetRef"
                        }
                      }
                    }
                  ],
                  "relationship": [],
                  "where": {
                    "localId": "17",
                    "locator": "19:5-19:67",
                    "type": "In",
                    "operand": [
                      {
                        "locator": "19:36-19:39",
                        "type": "End",
                        "operand": {
                          "localId": "15",
                          "locator": "19:11-19:34",
                          "path": "relevantPeriod",
                          "scope": "Encounter",
                          "type": "Property"
                        }
                      },
                      {
                        "localId": "16",
                        "locator": "19:48-19:67",
                        "name": "Measurement Period",
                        "type": "ParameterRef"
                      }
                    ]
                  }
                }
              },
              {
                "localId": "29",
                "locator": "40:1-42:71",
                "name": "SOCProcedures",
                "context": "Patient",
                "accessLevel": "Public",
                "type": "FunctionDef",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "29",
                      "s": [
                        {
                          "value": [
                            "",
                            "define function ",
                            "\"SOCProcedures\"",
                            "(",
                            "Encounter",
                            " "
                          ]
                        },
                        {
                          "r": "23",
                          "s": [
                            {
                              "value": ["\"Encounter, Performed\""]
                            }
                          ]
                        },
                        {
                          "value": [" ):\n  "]
                        },
                        {
                          "r": "28",
                          "s": [
                            {
                              "r": "28",
                              "s": [
                                {
                                  "s": [
                                    {
                                      "r": "27",
                                      "s": [
                                        {
                                          "r": "26",
                                          "s": [
                                            {
                                              "value": ["( "]
                                            },
                                            {
                                              "r": "26",
                                              "s": [
                                                {
                                                  "r": "24",
                                                  "s": [
                                                    {
                                                      "value": [
                                                        "[",
                                                        "\"Procedure, Performed\"",
                                                        ": "
                                                      ]
                                                    },
                                                    {
                                                      "s": [
                                                        {
                                                          "value": [
                                                            "\"Severe Maternal Morbidity Procedures\""
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": ["]"]
                                                    }
                                                  ]
                                                },
                                                {
                                                  "value": ["\n    union "]
                                                },
                                                {
                                                  "r": "25",
                                                  "s": [
                                                    {
                                                      "value": [
                                                        "[",
                                                        "\"Procedure, Performed\"",
                                                        ": "
                                                      ]
                                                    },
                                                    {
                                                      "s": [
                                                        {
                                                          "value": [
                                                            "\"Blood Transfusion\""
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": ["]"]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "value": [" )"]
                                            }
                                          ]
                                        },
                                        {
                                          "value": [" ", "SMMProcedures"]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  }
                ],
                "expression": {
                  "localId": "28",
                  "locator": "41:3-42:71",
                  "type": "Query",
                  "source": [
                    {
                      "localId": "27",
                      "locator": "41:3-42:71",
                      "alias": "SMMProcedures",
                      "expression": {
                        "localId": "26",
                        "locator": "41:3-42:57",
                        "type": "Union",
                        "operand": [
                          {
                            "localId": "24",
                            "locator": "41:5-41:68",
                            "dataType": "{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed",
                            "templateId": "PositiveProcedurePerformed",
                            "codeProperty": "code",
                            "codeComparator": "in",
                            "type": "Retrieve",
                            "codes": {
                              "locator": "41:30-41:67",
                              "name": "Severe Maternal Morbidity Procedures",
                              "preserve": true,
                              "type": "ValueSetRef"
                            }
                          },
                          {
                            "localId": "25",
                            "locator": "42:11-42:55",
                            "dataType": "{urn:healthit-gov:qdm:v5_6}PositiveProcedurePerformed",
                            "templateId": "PositiveProcedurePerformed",
                            "codeProperty": "code",
                            "codeComparator": "in",
                            "type": "Retrieve",
                            "codes": {
                              "locator": "42:36-42:54",
                              "name": "Blood Transfusion",
                              "preserve": true,
                              "type": "ValueSetRef"
                            }
                          }
                        ]
                      }
                    }
                  ],
                  "relationship": []
                },
                "operand": [
                  {
                    "name": "Encounter",
                    "operandTypeSpecifier": {
                      "localId": "23",
                      "locator": "40:43-40:64",
                      "name": "{urn:healthit-gov:qdm:v5_6}PositiveEncounterPerformed",
                      "type": "NamedTypeSpecifier"
                    }
                  }
                ]
              },
              {
                "localId": "77",
                "locator": "21:1-38:5",
                "name": "SDE SOC Procedure Detail",
                "context": "Patient",
                "accessLevel": "Public",
                "annotation": [
                  {
                    "type": "Annotation",
                    "s": {
                      "r": "77",
                      "s": [
                        {
                          "value": [
                            "",
                            "define ",
                            "\"SDE SOC Procedure Detail\"",
                            ":\n  "
                          ]
                        },
                        {
                          "r": "76",
                          "s": [
                            {
                              "s": [
                                {
                                  "r": "21",
                                  "s": [
                                    {
                                      "r": "20",
                                      "s": [
                                        {
                                          "s": [
                                            {
                                              "value": [
                                                "\"Qualifying Encounters\""
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "value": [" ", "Encounter"]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "value": ["\n    "]
                            },
                            {
                              "s": [
                                {
                                  "value": ["let "]
                                },
                                {
                                  "r": "31",
                                  "s": [
                                    {
                                      "value": ["procedure", ": "]
                                    },
                                    {
                                      "r": "30",
                                      "s": [
                                        {
                                          "value": ["\"SOCProcedures\"", "("]
                                        },
                                        {
                                          "r": "22",
                                          "s": [
                                            {
                                              "value": ["Encounter"]
                                            }
                                          ]
                                        },
                                        {
                                          "value": [")"]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "value": ["\n    "]
                            },
                            {
                              "r": "75",
                              "s": [
                                {
                                  "value": ["return "]
                                },
                                {
                                  "r": "74",
                                  "s": [
                                    {
                                      "value": ["{\n      "]
                                    },
                                    {
                                      "s": [
                                        {
                                          "value": ["id", ": "]
                                        },
                                        {
                                          "r": "33",
                                          "s": [
                                            {
                                              "r": "32",
                                              "s": [
                                                {
                                                  "value": ["Encounter"]
                                                }
                                              ]
                                            },
                                            {
                                              "value": ["."]
                                            },
                                            {
                                              "r": "33",
                                              "s": [
                                                {
                                                  "value": ["id"]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "value": [",\n      "]
                                    },
                                    {
                                      "s": [
                                        {
                                          "value": ["code", ": "]
                                        },
                                        {
                                          "r": "35",
                                          "s": [
                                            {
                                              "r": "34",
                                              "s": [
                                                {
                                                  "value": ["Encounter"]
                                                }
                                              ]
                                            },
                                            {
                                              "value": ["."]
                                            },
                                            {
                                              "r": "35",
                                              "s": [
                                                {
                                                  "value": ["code"]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "value": [",\n      "]
                                    },
                                    {
                                      "s": [
                                        {
                                          "value": ["procedures", ": "]
                                        },
                                        {
                                          "r": "73",
                                          "s": [
                                            {
                                              "s": [
                                                {
                                                  "r": "37",
                                                  "s": [
                                                    {
                                                      "r": "36",
                                                      "s": [
                                                        {
                                                          "s": [
                                                            {
                                                              "value": [
                                                                "procedure"
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": [" ", "P"]
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "value": ["\n        "]
                                            },
                                            {
                                              "r": "72",
                                              "s": [
                                                {
                                                  "value": ["return "]
                                                },
                                                {
                                                  "r": "71",
                                                  "s": [
                                                    {
                                                      "value": ["{\n          "]
                                                    },
                                                    {
                                                      "s": [
                                                        {
                                                          "value": [
                                                            "code",
                                                            ": "
                                                          ]
                                                        },
                                                        {
                                                          "r": "38",
                                                          "s": [
                                                            {
                                                              "value": ["P"]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": [",\n          "]
                                                    },
                                                    {
                                                      "s": [
                                                        {
                                                          "value": [
                                                            "SOCCategory",
                                                            ": "
                                                          ]
                                                        },
                                                        {
                                                          "r": "70",
                                                          "s": [
                                                            {
                                                              "value": [
                                                                "case\n            "
                                                              ]
                                                            },
                                                            {
                                                              "r": "44",
                                                              "s": [
                                                                {
                                                                  "value": [
                                                                    "when "
                                                                  ]
                                                                },
                                                                {
                                                                  "r": "42",
                                                                  "s": [
                                                                    {
                                                                      "r": "40",
                                                                      "s": [
                                                                        {
                                                                          "r": "39",
                                                                          "s": [
                                                                            {
                                                                              "value": [
                                                                                "P"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "value": [
                                                                            "."
                                                                          ]
                                                                        },
                                                                        {
                                                                          "r": "40",
                                                                          "s": [
                                                                            {
                                                                              "value": [
                                                                                "code"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "value": [
                                                                        " in "
                                                                      ]
                                                                    },
                                                                    {
                                                                      "r": "41",
                                                                      "s": [
                                                                        {
                                                                          "value": [
                                                                            "\"Blood Transfusion\""
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "value": [
                                                                    " then "
                                                                  ]
                                                                },
                                                                {
                                                                  "r": "43",
                                                                  "s": [
                                                                    {
                                                                      "value": [
                                                                        "'Blood Transfusion'"
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "value": [
                                                                "\n            "
                                                              ]
                                                            },
                                                            {
                                                              "r": "50",
                                                              "s": [
                                                                {
                                                                  "value": [
                                                                    "when "
                                                                  ]
                                                                },
                                                                {
                                                                  "r": "48",
                                                                  "s": [
                                                                    {
                                                                      "r": "46",
                                                                      "s": [
                                                                        {
                                                                          "r": "45",
                                                                          "s": [
                                                                            {
                                                                              "value": [
                                                                                "P"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "value": [
                                                                            "."
                                                                          ]
                                                                        },
                                                                        {
                                                                          "r": "46",
                                                                          "s": [
                                                                            {
                                                                              "value": [
                                                                                "code"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "value": [
                                                                        " in "
                                                                      ]
                                                                    },
                                                                    {
                                                                      "r": "47",
                                                                      "s": [
                                                                        {
                                                                          "value": [
                                                                            "\"Conversion of Cardiac Rhythm\""
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "value": [
                                                                    " then "
                                                                  ]
                                                                },
                                                                {
                                                                  "r": "49",
                                                                  "s": [
                                                                    {
                                                                      "value": [
                                                                        "'Conversion of cardiac rhythm'"
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "value": [
                                                                "\n            "
                                                              ]
                                                            },
                                                            {
                                                              "r": "56",
                                                              "s": [
                                                                {
                                                                  "value": [
                                                                    "when "
                                                                  ]
                                                                },
                                                                {
                                                                  "r": "54",
                                                                  "s": [
                                                                    {
                                                                      "r": "52",
                                                                      "s": [
                                                                        {
                                                                          "r": "51",
                                                                          "s": [
                                                                            {
                                                                              "value": [
                                                                                "P"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "value": [
                                                                            "."
                                                                          ]
                                                                        },
                                                                        {
                                                                          "r": "52",
                                                                          "s": [
                                                                            {
                                                                              "value": [
                                                                                "code"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "value": [
                                                                        " in "
                                                                      ]
                                                                    },
                                                                    {
                                                                      "r": "53",
                                                                      "s": [
                                                                        {
                                                                          "value": [
                                                                            "\"Hysterectomy\""
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "value": [
                                                                    " then "
                                                                  ]
                                                                },
                                                                {
                                                                  "r": "55",
                                                                  "s": [
                                                                    {
                                                                      "value": [
                                                                        "'Hysterectomy'"
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "value": [
                                                                "\n            "
                                                              ]
                                                            },
                                                            {
                                                              "r": "62",
                                                              "s": [
                                                                {
                                                                  "value": [
                                                                    "when "
                                                                  ]
                                                                },
                                                                {
                                                                  "r": "60",
                                                                  "s": [
                                                                    {
                                                                      "r": "58",
                                                                      "s": [
                                                                        {
                                                                          "r": "57",
                                                                          "s": [
                                                                            {
                                                                              "value": [
                                                                                "P"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "value": [
                                                                            "."
                                                                          ]
                                                                        },
                                                                        {
                                                                          "r": "58",
                                                                          "s": [
                                                                            {
                                                                              "value": [
                                                                                "code"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "value": [
                                                                        " in "
                                                                      ]
                                                                    },
                                                                    {
                                                                      "r": "59",
                                                                      "s": [
                                                                        {
                                                                          "value": [
                                                                            "\"Tracheostomy\""
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "value": [
                                                                    " then "
                                                                  ]
                                                                },
                                                                {
                                                                  "r": "61",
                                                                  "s": [
                                                                    {
                                                                      "value": [
                                                                        "'Tracheostomy'"
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "value": [
                                                                "\n            "
                                                              ]
                                                            },
                                                            {
                                                              "r": "68",
                                                              "s": [
                                                                {
                                                                  "value": [
                                                                    "when "
                                                                  ]
                                                                },
                                                                {
                                                                  "r": "66",
                                                                  "s": [
                                                                    {
                                                                      "r": "64",
                                                                      "s": [
                                                                        {
                                                                          "r": "63",
                                                                          "s": [
                                                                            {
                                                                              "value": [
                                                                                "P"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        },
                                                                        {
                                                                          "value": [
                                                                            "."
                                                                          ]
                                                                        },
                                                                        {
                                                                          "r": "64",
                                                                          "s": [
                                                                            {
                                                                              "value": [
                                                                                "code"
                                                                              ]
                                                                            }
                                                                          ]
                                                                        }
                                                                      ]
                                                                    },
                                                                    {
                                                                      "value": [
                                                                        " in "
                                                                      ]
                                                                    },
                                                                    {
                                                                      "r": "65",
                                                                      "s": [
                                                                        {
                                                                          "value": [
                                                                            "\"Ventilation\""
                                                                          ]
                                                                        }
                                                                      ]
                                                                    }
                                                                  ]
                                                                },
                                                                {
                                                                  "value": [
                                                                    " then "
                                                                  ]
                                                                },
                                                                {
                                                                  "r": "67",
                                                                  "s": [
                                                                    {
                                                                      "value": [
                                                                        "'Ventilation'"
                                                                      ]
                                                                    }
                                                                  ]
                                                                }
                                                              ]
                                                            },
                                                            {
                                                              "r": "69",
                                                              "value": [
                                                                " \n            else ",
                                                                "null",
                                                                " end"
                                                              ]
                                                            }
                                                          ]
                                                        }
                                                      ]
                                                    },
                                                    {
                                                      "value": ["\n        }"]
                                                    }
                                                  ]
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    },
                                    {
                                      "value": ["\n    }"]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  }
                ],
                "expression": {
                  "localId": "76",
                  "locator": "22:3-38:5",
                  "type": "Query",
                  "source": [
                    {
                      "localId": "21",
                      "locator": "22:3-22:35",
                      "alias": "Encounter",
                      "expression": {
                        "localId": "20",
                        "locator": "22:3-22:25",
                        "name": "Qualifying Encounters",
                        "type": "ExpressionRef"
                      }
                    }
                  ],
                  "let": [
                    {
                      "localId": "31",
                      "locator": "23:9-23:45",
                      "identifier": "procedure",
                      "expression": {
                        "localId": "30",
                        "locator": "23:20-23:45",
                        "name": "SOCProcedures",
                        "type": "FunctionRef",
                        "operand": [
                          {
                            "localId": "22",
                            "locator": "23:36-23:44",
                            "name": "Encounter",
                            "type": "AliasRef"
                          }
                        ]
                      }
                    }
                  ],
                  "relationship": [],
                  "return": {
                    "localId": "75",
                    "locator": "24:5-38:5",
                    "expression": {
                      "localId": "74",
                      "locator": "24:12-38:5",
                      "type": "Tuple",
                      "element": [
                        {
                          "name": "id",
                          "value": {
                            "localId": "33",
                            "locator": "25:11-25:22",
                            "path": "id",
                            "scope": "Encounter",
                            "type": "Property"
                          }
                        },
                        {
                          "name": "code",
                          "value": {
                            "localId": "35",
                            "locator": "26:13-26:26",
                            "path": "code",
                            "scope": "Encounter",
                            "type": "Property"
                          }
                        },
                        {
                          "name": "procedures",
                          "value": {
                            "localId": "73",
                            "locator": "27:19-37:9",
                            "type": "Query",
                            "source": [
                              {
                                "localId": "37",
                                "locator": "27:19-27:29",
                                "alias": "P",
                                "expression": {
                                  "localId": "36",
                                  "locator": "27:19-27:27",
                                  "name": "procedure",
                                  "type": "QueryLetRef"
                                }
                              }
                            ],
                            "relationship": [],
                            "return": {
                              "localId": "72",
                              "locator": "28:9-37:9",
                              "expression": {
                                "localId": "71",
                                "locator": "28:16-37:9",
                                "type": "Tuple",
                                "element": [
                                  {
                                    "name": "code",
                                    "value": {
                                      "localId": "38",
                                      "locator": "29:17",
                                      "name": "P",
                                      "type": "AliasRef"
                                    }
                                  },
                                  {
                                    "name": "SOCCategory",
                                    "value": {
                                      "localId": "70",
                                      "locator": "30:24-36:25",
                                      "type": "Case",
                                      "caseItem": [
                                        {
                                          "localId": "44",
                                          "locator": "31:13-31:71",
                                          "when": {
                                            "localId": "42",
                                            "locator": "31:18-31:46",
                                            "type": "InValueSet",
                                            "code": {
                                              "localId": "40",
                                              "locator": "31:18-31:23",
                                              "path": "code",
                                              "scope": "P",
                                              "type": "Property"
                                            },
                                            "valueset": {
                                              "localId": "41",
                                              "locator": "31:28-31:46",
                                              "name": "Blood Transfusion",
                                              "preserve": true
                                            }
                                          },
                                          "then": {
                                            "localId": "43",
                                            "locator": "31:53-31:71",
                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                            "value": "Blood Transfusion",
                                            "type": "Literal"
                                          }
                                        },
                                        {
                                          "localId": "50",
                                          "locator": "32:13-32:93",
                                          "when": {
                                            "localId": "48",
                                            "locator": "32:18-32:57",
                                            "type": "InValueSet",
                                            "code": {
                                              "localId": "46",
                                              "locator": "32:18-32:23",
                                              "path": "code",
                                              "scope": "P",
                                              "type": "Property"
                                            },
                                            "valueset": {
                                              "localId": "47",
                                              "locator": "32:28-32:57",
                                              "name": "Conversion of Cardiac Rhythm",
                                              "preserve": true
                                            }
                                          },
                                          "then": {
                                            "localId": "49",
                                            "locator": "32:64-32:93",
                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                            "value": "Conversion of cardiac rhythm",
                                            "type": "Literal"
                                          }
                                        },
                                        {
                                          "localId": "56",
                                          "locator": "33:13-33:61",
                                          "when": {
                                            "localId": "54",
                                            "locator": "33:18-33:41",
                                            "type": "InValueSet",
                                            "code": {
                                              "localId": "52",
                                              "locator": "33:18-33:23",
                                              "path": "code",
                                              "scope": "P",
                                              "type": "Property"
                                            },
                                            "valueset": {
                                              "localId": "53",
                                              "locator": "33:28-33:41",
                                              "name": "Hysterectomy",
                                              "preserve": true
                                            }
                                          },
                                          "then": {
                                            "localId": "55",
                                            "locator": "33:48-33:61",
                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                            "value": "Hysterectomy",
                                            "type": "Literal"
                                          }
                                        },
                                        {
                                          "localId": "62",
                                          "locator": "34:13-34:61",
                                          "when": {
                                            "localId": "60",
                                            "locator": "34:18-34:41",
                                            "type": "InValueSet",
                                            "code": {
                                              "localId": "58",
                                              "locator": "34:18-34:23",
                                              "path": "code",
                                              "scope": "P",
                                              "type": "Property"
                                            },
                                            "valueset": {
                                              "localId": "59",
                                              "locator": "34:28-34:41",
                                              "name": "Tracheostomy",
                                              "preserve": true
                                            }
                                          },
                                          "then": {
                                            "localId": "61",
                                            "locator": "34:48-34:61",
                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                            "value": "Tracheostomy",
                                            "type": "Literal"
                                          }
                                        },
                                        {
                                          "localId": "68",
                                          "locator": "35:13-35:59",
                                          "when": {
                                            "localId": "66",
                                            "locator": "35:18-35:40",
                                            "type": "InValueSet",
                                            "code": {
                                              "localId": "64",
                                              "locator": "35:18-35:23",
                                              "path": "code",
                                              "scope": "P",
                                              "type": "Property"
                                            },
                                            "valueset": {
                                              "localId": "65",
                                              "locator": "35:28-35:40",
                                              "name": "Ventilation",
                                              "preserve": true
                                            }
                                          },
                                          "then": {
                                            "localId": "67",
                                            "locator": "35:47-35:59",
                                            "valueType": "{urn:hl7-org:elm-types:r1}String",
                                            "value": "Ventilation",
                                            "type": "Literal"
                                          }
                                        }
                                      ],
                                      "else": {
                                        "asType": "{urn:hl7-org:elm-types:r1}String",
                                        "type": "As",
                                        "operand": {
                                          "localId": "69",
                                          "locator": "36:18-36:21",
                                          "type": "Null"
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            ]
          }
        }
      },
      "cql": "library TestWhenCase version '0.0.001'\r\n\r\nusing QDM version '5.6'\r\n\r\nvalueset \"Blood Transfusion\": 'urn:oid:2.16.840.1.113762.1.4.1029.213'\r\nvalueset \"Conversion of Cardiac Rhythm\": 'urn:oid:2.16.840.1.113762.1.4.1029.357'\r\nvalueset \"Encounter Inpatient\": 'urn:oid:2.16.840.1.113883.3.666.5.307'\r\nvalueset \"Hysterectomy\": 'urn:oid:2.16.840.1.113762.1.4.1029.358'\r\nvalueset \"Severe Maternal Morbidity Procedures\": 'urn:oid:2.16.840.1.113762.1.4.1029.256'\r\nvalueset \"Tracheostomy\": 'urn:oid:2.16.840.1.113762.1.4.1029.359'\r\nvalueset \"Ventilation\": 'urn:oid:2.16.840.1.113762.1.4.1029.360'\r\n\r\nparameter \"Measurement Period\" Interval<DateTime>\r\n\r\ncontext Patient\r\n\r\ndefine \"Qualifying Encounters\":\r\n  [\"Encounter, Performed\": \"Encounter Inpatient\"] Encounter\r\n    where Encounter.relevantPeriod ends during \"Measurement Period\"\r\n\r\ndefine \"SDE SOC Procedure Detail\":\r\n  \"Qualifying Encounters\" Encounter\r\n    let procedure: \"SOCProcedures\"(Encounter)\r\n    return {\r\n      id: Encounter.id,\r\n      code: Encounter.code,\r\n      procedures: procedure P\r\n        return {\r\n          code: P,\r\n          SOCCategory:\r\n          case\r\n            when P.code in \"Blood Transfusion\" then 'Blood Transfusion'\r\n            when P.code in \"Conversion of Cardiac Rhythm\" then 'Conversion of cardiac rhythm'\r\n            when P.code in \"Hysterectomy\" then 'Hysterectomy'\r\n            when P.code in \"Tracheostomy\" then 'Tracheostomy'\r\n            when P.code in \"Ventilation\" then 'Ventilation' \r\n            else null end\r\n        }\r\n    }\r\n\r\ndefine function \"SOCProcedures\"(Encounter \"Encounter, Performed\"):\r\n  ( [\"Procedure, Performed\": \"Severe Maternal Morbidity Procedures\"]\r\n    union [\"Procedure, Performed\": \"Blood Transfusion\"] ) SMMProcedures",
      "elm_annotations": {
        "statements": [
          {
            "children": [
              {
                "children": [
                  {
                    "children": [
                      {
                        "text": "define \"Qualifying Encounters\":\n  "
                      }
                    ]
                  },
                  {
                    "children": [
                      {
                        "children": [
                          {
                            "children": [
                              {
                                "children": [
                                  {
                                    "children": [
                                      {
                                        "children": [
                                          {
                                            "text": "[\"Encounter, Performed\": "
                                          }
                                        ]
                                      },
                                      {
                                        "children": [
                                          {
                                            "children": [
                                              {
                                                "text": "\"Encounter Inpatient\""
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "children": [
                                          {
                                            "text": "]"
                                          }
                                        ]
                                      }
                                    ],
                                    "node_type": "Retrieve",
                                    "ref_id": "12"
                                  }
                                ],
                                "node_type": "Retrieve",
                                "ref_id": "12"
                              },
                              {
                                "children": [
                                  {
                                    "text": " Encounter"
                                  }
                                ]
                              }
                            ],
                            "ref_id": "13"
                          }
                        ]
                      },
                      {
                        "children": [
                          {
                            "text": "\n    "
                          }
                        ]
                      },
                      {
                        "children": [
                          {
                            "children": [
                              {
                                "text": "where "
                              }
                            ]
                          },
                          {
                            "children": [
                              {
                                "children": [
                                  {
                                    "children": [
                                      {
                                        "children": [
                                          {
                                            "text": "Encounter"
                                          }
                                        ]
                                      }
                                    ],
                                    "ref_id": "14"
                                  },
                                  {
                                    "children": [
                                      {
                                        "text": "."
                                      }
                                    ]
                                  },
                                  {
                                    "children": [
                                      {
                                        "children": [
                                          {
                                            "text": "relevantPeriod"
                                          }
                                        ]
                                      }
                                    ],
                                    "node_type": "Property",
                                    "ref_id": "15"
                                  }
                                ],
                                "node_type": "Property",
                                "ref_id": "15"
                              },
                              {
                                "children": [
                                  {
                                    "text": " ends during "
                                  }
                                ],
                                "ref_id": "17"
                              },
                              {
                                "children": [
                                  {
                                    "children": [
                                      {
                                        "text": "\"Measurement Period\""
                                      }
                                    ]
                                  }
                                ],
                                "node_type": "ParameterRef",
                                "ref_id": "16"
                              }
                            ],
                            "ref_id": "17"
                          }
                        ],
                        "ref_id": "17"
                      }
                    ],
                    "node_type": "Query",
                    "ref_id": "18"
                  }
                ],
                "ref_id": "19"
              }
            ],
            "define_name": "Qualifying Encounters"
          },
          {
            "children": [
              {
                "children": [
                  {
                    "children": [
                      {
                        "text": "define function \"SOCProcedures\"(Encounter "
                      }
                    ]
                  },
                  {
                    "children": [
                      {
                        "children": [
                          {
                            "text": "\"Encounter, Performed\""
                          }
                        ]
                      }
                    ],
                    "ref_id": "23"
                  },
                  {
                    "children": [
                      {
                        "text": " ):\n  "
                      }
                    ]
                  },
                  {
                    "children": [
                      {
                        "children": [
                          {
                            "children": [
                              {
                                "children": [
                                  {
                                    "children": [
                                      {
                                        "children": [
                                          {
                                            "text": "( "
                                          }
                                        ]
                                      },
                                      {
                                        "children": [
                                          {
                                            "children": [
                                              {
                                                "children": [
                                                  {
                                                    "text": "[\"Procedure, Performed\": "
                                                  }
                                                ]
                                              },
                                              {
                                                "children": [
                                                  {
                                                    "children": [
                                                      {
                                                        "text": "\"Severe Maternal Morbidity Procedures\""
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "children": [
                                                  {
                                                    "text": "]"
                                                  }
                                                ]
                                              }
                                            ],
                                            "node_type": "Retrieve",
                                            "ref_id": "24"
                                          },
                                          {
                                            "children": [
                                              {
                                                "text": "\n    union "
                                              }
                                            ]
                                          },
                                          {
                                            "children": [
                                              {
                                                "children": [
                                                  {
                                                    "text": "[\"Procedure, Performed\": "
                                                  }
                                                ]
                                              },
                                              {
                                                "children": [
                                                  {
                                                    "children": [
                                                      {
                                                        "text": "\"Blood Transfusion\""
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "children": [
                                                  {
                                                    "text": "]"
                                                  }
                                                ]
                                              }
                                            ],
                                            "node_type": "Retrieve",
                                            "ref_id": "25"
                                          }
                                        ],
                                        "node_type": "Union",
                                        "ref_id": "26"
                                      },
                                      {
                                        "children": [
                                          {
                                            "text": " )"
                                          }
                                        ]
                                      }
                                    ],
                                    "node_type": "Union",
                                    "ref_id": "26"
                                  },
                                  {
                                    "children": [
                                      {
                                        "text": " SMMProcedures"
                                      }
                                    ]
                                  }
                                ],
                                "ref_id": "27"
                              }
                            ]
                          }
                        ],
                        "node_type": "Query",
                        "ref_id": "28"
                      }
                    ],
                    "node_type": "Query",
                    "ref_id": "28"
                  }
                ],
                "ref_id": "29"
              }
            ],
            "define_name": "SOCProcedures"
          },
          {
            "children": [
              {
                "children": [
                  {
                    "children": [
                      {
                        "text": "define \"SDE SOC Procedure Detail\":\n  "
                      }
                    ]
                  },
                  {
                    "children": [
                      {
                        "children": [
                          {
                            "children": [
                              {
                                "children": [
                                  {
                                    "children": [
                                      {
                                        "children": [
                                          {
                                            "text": "\"Qualifying Encounters\""
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ],
                                "node_type": "ExpressionRef",
                                "ref_id": "20"
                              },
                              {
                                "children": [
                                  {
                                    "text": " Encounter"
                                  }
                                ]
                              }
                            ],
                            "ref_id": "21"
                          }
                        ]
                      },
                      {
                        "children": [
                          {
                            "text": "\n    "
                          }
                        ]
                      },
                      {
                        "children": [
                          {
                            "children": [
                              {
                                "text": "let "
                              }
                            ]
                          },
                          {
                            "children": [
                              {
                                "children": [
                                  {
                                    "text": "procedure: "
                                  }
                                ]
                              },
                              {
                                "children": [
                                  {
                                    "children": [
                                      {
                                        "text": "\"SOCProcedures\"("
                                      }
                                    ]
                                  },
                                  {
                                    "children": [
                                      {
                                        "children": [
                                          {
                                            "text": "Encounter"
                                          }
                                        ]
                                      }
                                    ],
                                    "node_type": "AliasRef",
                                    "ref_id": "22"
                                  },
                                  {
                                    "children": [
                                      {
                                        "text": ")"
                                      }
                                    ]
                                  }
                                ],
                                "node_type": "FunctionRef",
                                "ref_id": "30"
                              }
                            ],
                            "ref_id": "31"
                          }
                        ]
                      },
                      {
                        "children": [
                          {
                            "text": "\n    "
                          }
                        ]
                      },
                      {
                        "children": [
                          {
                            "children": [
                              {
                                "text": "return "
                              }
                            ]
                          },
                          {
                            "children": [
                              {
                                "children": [
                                  {
                                    "text": "{\n      "
                                  }
                                ]
                              },
                              {
                                "children": [
                                  {
                                    "children": [
                                      {
                                        "text": "id: "
                                      }
                                    ]
                                  },
                                  {
                                    "children": [
                                      {
                                        "children": [
                                          {
                                            "children": [
                                              {
                                                "text": "Encounter"
                                              }
                                            ]
                                          }
                                        ],
                                        "ref_id": "32"
                                      },
                                      {
                                        "children": [
                                          {
                                            "text": "."
                                          }
                                        ]
                                      },
                                      {
                                        "children": [
                                          {
                                            "children": [
                                              {
                                                "text": "id"
                                              }
                                            ]
                                          }
                                        ],
                                        "ref_id": "33"
                                      }
                                    ],
                                    "ref_id": "33"
                                  }
                                ]
                              },
                              {
                                "children": [
                                  {
                                    "text": ",\n      "
                                  }
                                ]
                              },
                              {
                                "children": [
                                  {
                                    "children": [
                                      {
                                        "text": "code: "
                                      }
                                    ]
                                  },
                                  {
                                    "children": [
                                      {
                                        "children": [
                                          {
                                            "children": [
                                              {
                                                "text": "Encounter"
                                              }
                                            ]
                                          }
                                        ],
                                        "ref_id": "34"
                                      },
                                      {
                                        "children": [
                                          {
                                            "text": "."
                                          }
                                        ]
                                      },
                                      {
                                        "children": [
                                          {
                                            "children": [
                                              {
                                                "text": "code"
                                              }
                                            ]
                                          }
                                        ],
                                        "ref_id": "35"
                                      }
                                    ],
                                    "ref_id": "35"
                                  }
                                ]
                              },
                              {
                                "children": [
                                  {
                                    "text": ",\n      "
                                  }
                                ]
                              },
                              {
                                "children": [
                                  {
                                    "children": [
                                      {
                                        "text": "procedures: "
                                      }
                                    ]
                                  },
                                  {
                                    "children": [
                                      {
                                        "children": [
                                          {
                                            "children": [
                                              {
                                                "children": [
                                                  {
                                                    "children": [
                                                      {
                                                        "children": [
                                                          {
                                                            "text": "procedure"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ],
                                                "node_type": "QueryLetRef",
                                                "ref_id": "36"
                                              },
                                              {
                                                "children": [
                                                  {
                                                    "text": " P"
                                                  }
                                                ]
                                              }
                                            ],
                                            "ref_id": "37"
                                          }
                                        ]
                                      },
                                      {
                                        "children": [
                                          {
                                            "text": "\n        "
                                          }
                                        ]
                                      },
                                      {
                                        "children": [
                                          {
                                            "children": [
                                              {
                                                "text": "return "
                                              }
                                            ]
                                          },
                                          {
                                            "children": [
                                              {
                                                "children": [
                                                  {
                                                    "text": "{\n          "
                                                  }
                                                ]
                                              },
                                              {
                                                "children": [
                                                  {
                                                    "children": [
                                                      {
                                                        "text": "code: "
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "children": [
                                                      {
                                                        "children": [
                                                          {
                                                            "text": "P"
                                                          }
                                                        ]
                                                      }
                                                    ],
                                                    "ref_id": "38"
                                                  }
                                                ]
                                              },
                                              {
                                                "children": [
                                                  {
                                                    "text": ",\n          "
                                                  }
                                                ]
                                              },
                                              {
                                                "children": [
                                                  {
                                                    "children": [
                                                      {
                                                        "text": "SOCCategory: "
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "children": [
                                                      {
                                                        "children": [
                                                          {
                                                            "text": "case\n            "
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "children": [
                                                          {
                                                            "children": [
                                                              {
                                                                "text": "when "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "children": [
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "children": [
                                                                          {
                                                                            "text": "P"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "ref_id": "39"
                                                                  },
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "text": "."
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "children": [
                                                                          {
                                                                            "text": "code"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "ref_id": "40"
                                                                  }
                                                                ],
                                                                "ref_id": "40"
                                                              },
                                                              {
                                                                "children": [
                                                                  {
                                                                    "text": " in "
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "children": [
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "text": "\"Blood Transfusion\""
                                                                      }
                                                                    ]
                                                                  }
                                                                ],
                                                                "ref_id": "41"
                                                              }
                                                            ],
                                                            "ref_id": "42"
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "text": " then "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "children": [
                                                                  {
                                                                    "text": "'Blood Transfusion'"
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "ref_id": "43"
                                                          }
                                                        ],
                                                        "ref_id": "44"
                                                      },
                                                      {
                                                        "children": [
                                                          {
                                                            "text": "\n            "
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "children": [
                                                          {
                                                            "children": [
                                                              {
                                                                "text": "when "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "children": [
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "children": [
                                                                          {
                                                                            "text": "P"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "ref_id": "45"
                                                                  },
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "text": "."
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "children": [
                                                                          {
                                                                            "text": "code"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "ref_id": "46"
                                                                  }
                                                                ],
                                                                "ref_id": "46"
                                                              },
                                                              {
                                                                "children": [
                                                                  {
                                                                    "text": " in "
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "children": [
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "text": "\"Conversion of Cardiac Rhythm\""
                                                                      }
                                                                    ]
                                                                  }
                                                                ],
                                                                "ref_id": "47"
                                                              }
                                                            ],
                                                            "ref_id": "48"
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "text": " then "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "children": [
                                                                  {
                                                                    "text": "'Conversion of cardiac rhythm'"
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "ref_id": "49"
                                                          }
                                                        ],
                                                        "ref_id": "50"
                                                      },
                                                      {
                                                        "children": [
                                                          {
                                                            "text": "\n            "
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "children": [
                                                          {
                                                            "children": [
                                                              {
                                                                "text": "when "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "children": [
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "children": [
                                                                          {
                                                                            "text": "P"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "ref_id": "51"
                                                                  },
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "text": "."
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "children": [
                                                                          {
                                                                            "text": "code"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "ref_id": "52"
                                                                  }
                                                                ],
                                                                "ref_id": "52"
                                                              },
                                                              {
                                                                "children": [
                                                                  {
                                                                    "text": " in "
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "children": [
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "text": "\"Hysterectomy\""
                                                                      }
                                                                    ]
                                                                  }
                                                                ],
                                                                "ref_id": "53"
                                                              }
                                                            ],
                                                            "ref_id": "54"
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "text": " then "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "children": [
                                                                  {
                                                                    "text": "'Hysterectomy'"
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "ref_id": "55"
                                                          }
                                                        ],
                                                        "ref_id": "56"
                                                      },
                                                      {
                                                        "children": [
                                                          {
                                                            "text": "\n            "
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "children": [
                                                          {
                                                            "children": [
                                                              {
                                                                "text": "when "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "children": [
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "children": [
                                                                          {
                                                                            "text": "P"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "ref_id": "57"
                                                                  },
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "text": "."
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "children": [
                                                                          {
                                                                            "text": "code"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "ref_id": "58"
                                                                  }
                                                                ],
                                                                "ref_id": "58"
                                                              },
                                                              {
                                                                "children": [
                                                                  {
                                                                    "text": " in "
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "children": [
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "text": "\"Tracheostomy\""
                                                                      }
                                                                    ]
                                                                  }
                                                                ],
                                                                "ref_id": "59"
                                                              }
                                                            ],
                                                            "ref_id": "60"
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "text": " then "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "children": [
                                                                  {
                                                                    "text": "'Tracheostomy'"
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "ref_id": "61"
                                                          }
                                                        ],
                                                        "ref_id": "62"
                                                      },
                                                      {
                                                        "children": [
                                                          {
                                                            "text": "\n            "
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "children": [
                                                          {
                                                            "children": [
                                                              {
                                                                "text": "when "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "children": [
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "children": [
                                                                          {
                                                                            "text": "P"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "ref_id": "63"
                                                                  },
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "text": "."
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "children": [
                                                                          {
                                                                            "text": "code"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ],
                                                                    "ref_id": "64"
                                                                  }
                                                                ],
                                                                "ref_id": "64"
                                                              },
                                                              {
                                                                "children": [
                                                                  {
                                                                    "text": " in "
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "children": [
                                                                  {
                                                                    "children": [
                                                                      {
                                                                        "text": "\"Ventilation\""
                                                                      }
                                                                    ]
                                                                  }
                                                                ],
                                                                "ref_id": "65"
                                                              }
                                                            ],
                                                            "ref_id": "66"
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "text": " then "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "children": [
                                                              {
                                                                "children": [
                                                                  {
                                                                    "text": "'Ventilation'"
                                                                  }
                                                                ]
                                                              }
                                                            ],
                                                            "ref_id": "67"
                                                          }
                                                        ],
                                                        "ref_id": "68"
                                                      },
                                                      {
                                                        "children": [
                                                          {
                                                            "text": " \n            else null end"
                                                          }
                                                        ],
                                                        "node_type": "Null",
                                                        "ref_id": "69"
                                                      }
                                                    ],
                                                    "ref_id": "70"
                                                  }
                                                ]
                                              },
                                              {
                                                "children": [
                                                  {
                                                    "text": "\n        }"
                                                  }
                                                ]
                                              }
                                            ],
                                            "node_type": "Tuple",
                                            "ref_id": "71"
                                          }
                                        ],
                                        "ref_id": "72"
                                      }
                                    ],
                                    "ref_id": "73"
                                  }
                                ]
                              },
                              {
                                "children": [
                                  {
                                    "text": "\n    }"
                                  }
                                ]
                              }
                            ],
                            "node_type": "Tuple",
                            "ref_id": "74"
                          }
                        ],
                        "ref_id": "75"
                      }
                    ],
                    "node_type": "Query",
                    "ref_id": "76"
                  }
                ],
                "ref_id": "77"
              }
            ],
            "define_name": "SDE SOC Procedure Detail"
          }
        ],
        "identifier": {
          "id": "TestWhenCase",
          "version": "0.0.001"
        }
      },
      "statement_dependencies": [
        {
          "_id": "65ba97456068b16c755ed92a",
          "statement_name": "Patient",
          "statement_references": []
        },
        {
          "_id": "65ba97456068b16c755ed92b",
          "statement_name": "Qualifying Encounters",
          "statement_references": []
        },
        {
          "_id": "65ba97456068b16c755ed92c",
          "statement_name": "SOCProcedures",
          "statement_references": []
        },
        {
          "_id": "65ba97456068b16c755ed92d",
          "statement_name": "SDE SOC Procedure Detail",
          "statement_references": [
            {
              "_id": "65ba97456068b16c755ed92e",
              "library_name": "TestWhenCase",
              "statement_name": "Qualifying Encounters"
            },
            {
              "_id": "65ba97456068b16c755ed92f",
              "library_name": "TestWhenCase",
              "statement_name": "SOCProcedures"
            }
          ]
        }
      ]
    }
  ],
  "population_sets": [
    {
      "_id": "65ba97456068b16c755ed933",
      "title": "Population Criteria Section",
      "population_set_id": "PopulationSet_1",
      "populations": {
        "_id": "65ba97456068b16c755ed934",
        "_type": "CQM::CohortPopulationMap",
        "IPP": {
          "_id": "65ba97456068b16c755ed935",
          "library_name": "TestWhenCase",
          "statement_name": "SDE SOC Procedure Detail",
          "hqmf_id": "9C288484-8902-4099-9751-EB420FE57F23"
        }
      },
      "stratifications": [],
      "supplemental_data_elements": [],
      "observations": []
    }
  ]
}
